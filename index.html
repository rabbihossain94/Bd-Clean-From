<!DOCTYPE html>
<html lang="bn">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>BD Clean Jurain - User Registration</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <style>
    :root {
      --primary: #00695c;
      --secondary: #4db6ac;
      --success: #2e7d32;
      --danger: #d32f2f;
      --warning: #ff9800;
      --info: #1976d2;
      --dark: #333;
      --light: #f8f9fa;
    }
    
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Segoe UI', 'Nirmala UI', sans-serif;
    }

    body {
      background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 20px;
    }

    .container {
      background: #fff;
      padding: 30px;
      border-radius: 15px;
      box-shadow: 0 15px 30px rgba(0,0,0,0.15);
      width: 100%;
      max-width: 550px;
      animation: fadeIn 0.8s ease;
      position: relative;
      overflow: hidden;
    }

    .container::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 5px;
      background: linear-gradient(90deg, var(--primary), var(--secondary));
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(-20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    h2 {
      text-align: center;
      margin-bottom: 15px;
      color: var(--primary);
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
    }

    .header-info {
      text-align: center;
      margin-bottom: 25px;
      font-size: 14px;
      color: #555;
      display: flex;
      flex-direction: column;
      gap: 5px;
    }

    .header-info p {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
    }

    .progress-bar {
      height: 5px;
      background: #e0e0e0;
      border-radius: 5px;
      margin-bottom: 25px;
      overflow: hidden;
    }

    .progress {
      height: 100%;
      background: linear-gradient(90deg, var(--primary), var(--secondary));
      width: 0%;
      transition: width 0.5s ease;
    }

    .form-nav {
      display: flex;
      justify-content: space-between;
      margin-bottom: 20px;
    }

    .form-page {
      display: none;
    }

    .form-page.active {
      display: block;
      animation: slideIn 0.5s ease;
    }

    @keyframes slideIn {
      from { opacity: 0; transform: translateX(20px); }
      to { opacity: 1; transform: translateX(0); }
    }

    .form-group {
      margin-bottom: 20px;
      position: relative;
    }

    .form-group label {
      display: block;
      margin-bottom: 8px;
      font-weight: 600;
      color: #444;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .form-group input, .form-group select {
      width: 100%;
      padding: 14px 15px;
      border: 1px solid #ddd;
      border-radius: 8px;
      font-size: 15px;
      transition: all 0.3s;
      background: #f9f9f9;
    }

    .form-group input:focus, .form-group select:focus {
      border-color: var(--primary);
      background: #fff;
      outline: none;
      box-shadow: 0 0 0 3px rgba(0,105,92,0.2);
    }

    .form-group .error {
      color: var(--danger);
      font-size: 13px;
      margin-top: 5px;
      display: none;
    }

    .form-group.invalid input {
      border-color: var(--danger);
    }

    .form-group.invalid .error {
      display: block;
    }

    .btn {
      width: 100%;
      padding: 15px;
      border: none;
      border-radius: 8px;
      background: linear-gradient(135deg, var(--primary), var(--secondary));
      color: #fff;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s;
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 8px;
    }

    .btn:hover {
      background: linear-gradient(135deg, var(--secondary), var(--primary));
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(0,0,0,0.1);
    }

    .btn:active {
      transform: translateY(0);
    }

    .btn-secondary {
      background: #f1f1f1;
      color: #333;
    }

    .btn-secondary:hover {
      background: #e5e5e5;
    }

    .btn-nav {
      width: auto;
      padding: 12px 20px;
    }

    .message {
      margin-top: 20px;
      padding: 15px;
      border-radius: 8px;
      text-align: center;
      font-weight: 500;
      display: none;
    }

    .success {
      background: #d4edda;
      color: #155724;
      border: 1px solid #c3e6cb;
    }

    .error {
      background: #f8d7da;
      color: #721c24;
      border: 1px solid #f5c6cb;
    }

    .photo-upload-container {
      display: flex;
      flex-direction: column;
      align-items: center;
      margin: 15px 0;
    }

    .photo-preview {
      width: 120px;
      height: 120px;
      border-radius: 50%;
      object-fit: cover;
      border: 3px solid #eee;
      margin-bottom: 15px;
      display: none;
    }

    .upload-btn {
      position: relative;
      overflow: hidden;
      display: inline-block;
      cursor: pointer;
      background: var(--info);
      color: white;
      padding: 10px 20px;
      border-radius: 5px;
      text-align: center;
      transition: background 0.3s;
    }

    .upload-btn:hover {
      background: #1565c0;
    }

    .upload-btn input {
      position: absolute;
      left: 0;
      top: 0;
      opacity: 0;
      cursor: pointer;
      width: 100%;
      height: 100%;
    }

    .terms {
      margin: 20px 0;
      padding: 15px;
      border: 1px solid #ddd;
      border-radius: 8px;
      background: #f9f9f9;
      max-height: 150px;
      overflow-y: auto;
      font-size: 14px;
    }

    .footer {
      text-align: center;
      margin-top: 25px;
      color: #666;
      font-size: 14px;
    }

    @media (max-width: 576px) {
      .container {
        padding: 20px;
      }
      
      .form-nav {
        flex-direction: column;
        gap: 10px;
      }
      
      .btn-nav {
        width: 100%;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <h2><i class="fas fa-broom"></i> BD Clean Jurain</h2>
    <div class="header-info">
      <p id="date"><i class="fas fa-calendar-alt"></i> <span></span></p>
      <p id="time"><i class="fas fa-clock"></i> <span></span></p>
      <p id="ip"><i class="fas fa-globe"></i> <span></span></p>
    </div>

    <div class="progress-bar">
      <div class="progress" id="formProgress"></div>
    </div>

    <form id="userForm">
      <!-- Page 1: Personal Information -->
      <div class="form-page active" id="page1">
        <div class="form-group">
          <label for="name"><i class="fas fa-user"></i> পূর্ণ নাম:</label>
          <input type="text" id="name" placeholder="আপনার পূর্ণ নাম লিখুন" required>
          <div class="error">দয়া করে আপনার নাম লিখুন</div>
        </div>
        
        <div class="form-group">
          <label for="phone"><i class="fas fa-phone"></i> ফোন নম্বর:</label>
          <input type="tel" id="phone" placeholder="01XXXXXXXXX" required>
          <div class="error">সঠিক ফোন নম্বর লিখুন</div>
        </div>
        
        <div class="form-group">
          <label for="email"><i class="fas fa-envelope"></i> ইমেইল:</label>
          <input type="email" id="email" placeholder="example@gmail.com" required>
          <div class="error">সঠিক ইমেইল ঠিকানা লিখুন</div>
        </div>
        
        <button type="button" class="btn btn-nav" onclick="nextPage(1, 2)">
          পরবর্তী <i class="fas fa-arrow-right"></i>
        </button>
      </div>

      <!-- Page 2: Address Information -->
      <div class="form-page" id="page2">
        <div class="form-group">
          <label for="area"><i class="fas fa-map-marker-alt"></i> এলাকার নাম:</label>
          <input type="text" id="area" placeholder="আপনার এলাকার নাম লিখুন" required>
          <div class="error">দয়া করে এলাকার নাম লিখুন</div>
        </div>
        
        <div class="form-group">
          <label for="word"><i class="fas fa-home"></i> ওয়ার্ড নম্বর:</label>
          <input type="text" id="word" placeholder="ওয়ার্ড নম্বর লিখুন" required>
          <div class="error">দয়া করে ওয়ার্ড নম্বর লিখুন</div>
        </div>
        
        <div class="form-nav">
          <button type="button" class="btn btn-secondary btn-nav" onclick="nextPage(2, 1)">
            <i class="fas fa-arrow-left"></i> পূর্ববর্তী
          </button>
          <button type="button" class="btn btn-nav" onclick="nextPage(2, 3)">
            পরবর্তী <i class="fas fa-arrow-right"></i>
          </button>
        </div>
      </div>

      <!-- Page 3: Photo & Social -->
      <div class="form-page" id="page3">
        <div class="photo-upload-container">
          <img id="photoPreview" class="photo-preview" alt="Photo Preview">
          <label class="upload-btn">
            <i class="fas fa-camera"></i> ফটো আপলোড করুন
            <input type="file" id="photo" accept="image/*" required>
          </label>
          <div class="error" id="photoError">দয়া করে একটি ফটো আপলোড করুন</div>
        </div>
        
        <div class="form-group">
          <label for="facebook"><i class="fab fa-facebook"></i> ফেসবুক প্রোফাইল লিঙ্ক (ঐচ্ছিক):</label>
          <input type="url" id="facebook" placeholder="https://facebook.com/username">
          <div class="error">সঠিক ফেসবুক লিঙ্ক লিখুন</div>
        </div>
        
        <div class="terms">
          <h4><i class="fas fa-info-circle"></i> নিয়ম ও শর্তাবলী:</h4>
          <p>১. আবেদনকারীকে অবশ্যই বাংলাদেশের নাগরিক হতে হবে।</p>
          <p>২. প্রদত্ত সকল তথ্য সঠিক ও নির্ভুল হতে হবে।</p>
          <p>৩. ভুল তথ্য প্রদানের দায়ভার আবেদনকারীর নিজের।</p>
          <p>৪. আবেদন গ্রহণ বা বাতিল করার সম্পূর্ণ অধিকার BD Clean Jurain কর্তৃপক্ষের কাছে সংরক্ষিত।</p>
        </div>
        
        <div class="form-nav">
          <button type="button" class="btn btn-secondary btn-nav" onclick="nextPage(3, 2)">
            <i class="fas fa-arrow-left"></i> পূর্ববর্তী
          </button>
          <button type="button" class="btn btn-nav" onclick="validateForm()">
            <i class="fas fa-paper-plane"></i> জমা দিন
          </button>
        </div>
      </div>
    </form>

    <div id="successMessage" class="message success">
      <i class="fas fa-check-circle"></i> আপনার আবেদন সফলভাবে জমা হয়েছে!
    </div>
    
    <div id="errorMessage" class="message error">
      <i class="fas fa-exclamation-circle"></i> <span id="errorText">একটি ত্রুটি হয়েছে। আবার চেষ্টা করুন।</span>
    </div>

    <div class="footer">
      <p>BD Clean Jurain &copy; 2023 | সকল অধিকার সংরক্ষিত</p>
    </div>
  </div>

  <script>
    // Update date and time
    function updateDateTime() {
      const now = new Date();
      document.querySelector('#date span').textContent = now.toLocaleDateString('bn-BD');
      document.querySelector('#time span').textContent = now.toLocaleTimeString('bn-BD');
    }
    
    // Get user IP address
    async function getIPAddress() {
      try {
        const response = await fetch('https://api.ipify.org?format=json');
        const data = await response.json();
        document.querySelector('#ip span').textContent = data.ip;
      } catch (error) {
        document.querySelector('#ip span').textContent = "IP অজানা";
      }
    }
    
    // Navigate between form pages
    function nextPage(current, next) {
      if (current === 1 && !validatePage1()) return;
      if (current === 2 && !validatePage2()) return;
      
      document.getElementById(`page${current}`).classList.remove('active');
      document.getElementById(`page${next}`).classList.add('active');
      
      // Update progress bar
      document.getElementById('formProgress').style.width = `${(next-1)*33.33}%`;
    }
    
    // Validate page 1
    function validatePage1() {
      let isValid = true;
      
      // Name validation
      const name = document.getElementById('name');
      if (!name.value.trim()) {
        name.parentElement.classList.add('invalid');
        isValid = false;
      } else {
        name.parentElement.classList.remove('invalid');
      }
      
      // Phone validation
      const phone = document.getElementById('phone');
      const phoneRegex = /^01[3-9]\d{8}$/;
      if (!phoneRegex.test(phone.value)) {
        phone.parentElement.classList.add('invalid');
        isValid = false;
      } else {
        phone.parentElement.classList.remove('invalid');
      }
      
      // Email validation
      const email = document.getElementById('email');
      const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      if (!emailRegex.test(email.value)) {
        email.parentElement.classList.add('invalid');
        isValid = false;
      } else {
        email.parentElement.classList.remove('invalid');
      }
      
      return isValid;
    }
    
    // Validate page 2
    function validatePage2() {
      let isValid = true;
      
      // Area validation
      const area = document.getElementById('area');
      if (!area.value.trim()) {
        area.parentElement.classList.add('invalid');
        isValid = false;
      } else {
        area.parentElement.classList.remove('invalid');
      }
      
      // Word validation
      const word = document.getElementById('word');
      if (!word.value.trim()) {
        word.parentElement.classList.add('invalid');
        isValid = false;
      } else {
        word.parentElement.classList.remove('invalid');
      }
      
      return isValid;
    }
    
    // Photo preview
    document.getElementById('photo').addEventListener('change', function(e) {
      const file = e.target.files[0];
      const preview = document.getElementById('photoPreview');
      const error = document.getElementById('photoError');
      
      if (file) {
        // Validate file type
        if (!file.type.startsWith('image/')) {
          error.textContent = 'শুধুমাত্র ইমেজ ফাইল অনুমোদিত';
          error.style.display = 'block';
          this.value = '';
          preview.style.display = 'none';
          return;
        }
        
        // Validate file size (max 2MB)
        if (file.size > 2 * 1024 * 1024) {
          error.textContent = 'ফাইলের আকার 2MB এর কম হতে হবে';
          error.style.display = 'block';
          this.value = '';
          preview.style.display = 'none';
          return;
        }
        
        error.style.display = 'none';
        const reader = new FileReader();
        reader.onload = function(event) {
          preview.src = event.target.result;
          preview.style.display = 'block';
        };
        reader.readAsDataURL(file);
      } else {
        preview.style.display = 'none';
      }
    });
    
    // Form submission
    function validateForm() {
      if (!validatePage1() || !validatePage2()) {
        showError('দয়া করে সমস্ত প্রয়োজনীয় তথ্য সঠিকভাবে পূরণ করুন');
        return;
      }
      
      // Photo validation
      const photo = document.getElementById('photo');
      if (!photo.files || !photo.files[0]) {
        document.getElementById('photoError').style.display = 'block';
        showError('দয়া করে একটি ফটো আপলোড করুন');
        return;
      }
      
      // Facebook validation (optional)
      const facebook = document.getElementById('facebook');
      if (facebook.value) {
        try {
          new URL(facebook.value);
          facebook.parentElement.classList.remove('invalid');
        } catch (e) {
          facebook.parentElement.classList.add('invalid');
          showError('সঠিক ফেসবুক লিঙ্ক প্রদান করুন');
          return;
        }
      }
      
      // All validations passed, submit the form
      submitForm();
    }
    
    // Submit form data
    function submitForm() {
      const photoFile = document.getElementById('photo').files[0];
      const reader = new FileReader();
      
      reader.onload = function(event) {
        const user = {
          id: Date.now(),
          name: document.getElementById('name').value,
          phone: document.getElementById('phone').value,
          email: document.getElementById('email').value,
          area: document.getElementById('area').value,
          word: document.getElementById('word').value,
          photo: event.target.result,
          facebook: document.getElementById('facebook').value || 'N/A',
          status: 'Pending',
          date: new Date().toLocaleDateString('bn-BD')
        };
        
        // Save to localStorage
        let users = JSON.parse(localStorage.getItem('users')) || [];
        users.push(user);
        localStorage.setItem('users', JSON.stringify(users));
        
        // Show success message
        document.getElementById('successMessage').style.display = 'block';
        document.getElementById('errorMessage').style.display = 'none';
        
        // Reset form
        document.getElementById('userForm').reset();
        document.getElementById('photoPreview').style.display = 'none';
        
        // Send to Telegram
        sendTelegram(user);
        
        // Reset to first page after 3 seconds
        setTimeout(() => {
          document.querySelectorAll('.form-page').forEach(page => page.classList.remove('active'));
          document.getElementById('page1').classList.add('active');
          document.getElementById('formProgress').style.width = '0%';
          document.getElementById('successMessage').style.display = 'none';
        }, 3000);
      };
      
      reader.readAsDataURL(photoFile);
    }
    
    // Show error message
    function showError(message) {
      document.getElementById('errorText').textContent = message;
      document.getElementById('errorMessage').style.display = 'block';
      document.getElementById('successMessage').style.display = 'none';
      
      // Scroll to error message
      document.getElementById('errorMessage').scrollIntoView({ behavior: 'smooth' });
    }
    
    // Send data to Telegram
    function sendTelegram(user) {
      const BOT_TOKEN = "7757315317:AAHhlhX7UwuOnqSGE7C3PihIJCN-d_Gpbc4";
      const CHAT_ID = "-4970599148";
      
      if (!BOT_TOKEN || !CHAT_ID || BOT_TOKEN === "YOUR_BOT_TOKEN") {
        console.log("Telegram bot not configured");
        return;
      }
      
      const message = `
📢 *BD Clean Jurain - নতুন আবেদন*
👤 নাম: ${user.name}
📱 ফোন: ${user.phone}
📧 ইমেইল: ${user.email}
📍 এলাকা: ${user.area}
🏘 ওয়ার্ড: ${user.word}
📸 ফটো: ইউজার দ্বারা আপলোড করা হয়েছে
📅 তারিখ: ${user.date}
      `;
      
      fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`, {
        method: 'POST',
        headers: {'Content-Type': 'application/json'},
        body: JSON.stringify({
          chat_id: CHAT_ID,
          text: message,
          parse_mode: 'Markdown'
        })
      })
      .catch(error => console.error('Error sending to Telegram:', error));
    }
    
    // Initialize the application
    function init() {
      updateDateTime();
      setInterval(updateDateTime, 1000);
      getIPAddress();
    }
    
    // Run initialization
    init();
  </script>
</body>
</html>
